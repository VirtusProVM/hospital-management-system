<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Schedule Appointment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
<div th:replace="fragments/nav :: nav"></div>

<div class="container mt-4">
    <h2 class="mb-4 text-primary" style="margin-top:100px;">Schedule Appointment for Patient [[${patientId}]]</h2>

    <form th:action="@{'/reception/patients/' + ${patientId} + '/create'}" method="post" th:object="${appointment}" class="p-4 rounded bg-white shadow-sm" style="max-width: 550px;">
        <label class="form-label">Doctor:</label>
        <select name="doctorId" th:field="*{doctor.doctorId}" class="form-select" required>
            <option value="" disabled selected>Select a doctor</option>
            <option th:each="doc : ${doctors}"
                    th:value="${doc.doctorId}"
                    th:selected="${preselectedDoctorId != null} ? ${doc.doctorId} == ${preselectedDoctorId} : false"
                    th:text="${doc.firstName + ' ' + doc.lastName + ' (' + doc.specialty + ')'}"></option>
        </select><br/>

        <label class="form-label">Date & Time:</label>
        <input class="form-control" type="datetime-local" name="appointmentDate" required/><br/>

        <label class="form-label">Status</label>
        <input class="form-control" type="text" name="status"/><br/>

        <label class="form-label">Notes:</label>
        <input class="form-control" type="text" name="notes"/><br/>

        <button type="submit" class="btn btn-success">Schedule</button>
    </form>

    <a th:href="@{'/reception/patients/' + ${patientId}}" class="btn btn-secondary">Back to patient</a>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>